<div id="engine-header">
    <h1>
        <span class="logo"></span>
        <span class="title">Scheduler Management Console</span>
    </h1>
</div>

<div id="engine-content">
    <div id="engine-details">
        <div class="row">
            <div class="col-xs-12 col-md-3 col-lg-1">
                <button id="startEngine" class="btn btn-block btn-default"><span class="glyphicon glyphicon-play" aria-hidden="true"></span>&nbsp;Start</button>
                <button id="pauseEngine" class="btn btn-block btn-default"><span class="glyphicon glyphicon-pause" aria-hidden="true"></span>&nbsp;Pause</button>
                <button id="shutdownEngine" class="btn btn-block btn-danger"><span class="glyphicon glyphicon-off" aria-hidden="true"></span>&nbsp;Turn Off</button>
            </div>
            <div class="col-xs-12 col-md-3 col-lg-4">
                <div class="panel panel-default">
                    <div class="panel-heading">Engine</div>
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr>
                                <th class="col-md-5">Scheduler Engine</th>
                                <td id="engine-type" class="col-md-7"></td>
                            </tr>
                            <tr>
                                <th class="col-md-5">Engine State</th>
                                <td id="engine-state" class="col-md-7"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="col-xs-12 col-md-3 col-lg-3">
                <div class="panel panel-default">
                    <div class="panel-heading">Jobs</div>
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr>
                                <th class="col-md-8">Total</th>
                                <td id="jobs-total-count" class="col-md-4">0</td>
                            </tr>
                            <tr>
                                <th class="col-md-8">Running</th>
                                <td id="jobs-total-running" class="col-md-4">0</td>
                            </tr>
                            <tr>
                                <th class="col-md-8">Paused</th>
                                <td id="jobs-total-paused" class="col-md-4">0</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="col-xs-12 col-md-3 col-lg-4">
                <div class="panel panel-default">
                    <div class="panel-heading">System information</div>
                    <table class="table table-striped table-bordered">
                        <tbody>
                            <tr>
                                <th class="col-md-5">Instance ID</th>
                                <td id="scheduler-instanceId" class="col-md-7"></td>
                            </tr>
                            <tr>
                                <th class="col-md-5">Instance Name</th>
                                <td id="scheduler-instanceName" class="col-md-7"></td>
                            </tr>
                            <tr>
                                <th class="col-md-5">Running since</th>
                                <td id="scheduler-startDate" class="col-md-7"></td>
                            </tr>
                            <tr>
                                <th class="col-md-5">Version</th>
                                <td id="scheduler-version" class="col-md-7"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div id="engine-jobs-details">

    </div>
</div>

<script id="jobGroup-template" type="text/x-handlebars-template">
    <div id="group_{{id}}" class="panel panel-default">
        <div class="panel-heading">{{group}}</div>
        <table class="table table-bordered">
            <thead>
                <tr>
                    <th class="col-md-2">Job Name</th>
                    <th class="col-md-2">Description</th>
                    <th class="col-md-1">Schedule</th>
                    <th class="col-md-2">Previous Fire Time</th>
                    <th class="col-md-2">Next Fire Time</th>
                    <th class="col-md-1">State</th>
                    <th class="col-md-1"></th>
                    <th class="col-md-1"></th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>
</script>

<script id="jobDetails-template" type="text/x-handlebars-template">
    <tr id="job_{{id}}">
        <td class="jobName">{{name}}</td>
        <td class="jobDescription">{{description}}</td>
        <td class="jobSchedule">{{schedule}}</td>
        <td class="jobPrevFireTime">{{prevFireTime}}</td>
        <td class="jobNextFireTime">{{nextFireTime}}</td>
        <td class="jobState">{{#if actionState}}{{actionState}}{{else}}{{state}}{{/if}}</td>
        <td class="text-center">
            <button id="jobTrigger_{{id}}" class="btn btn-primary triggerJob {{#if isExecuting}}disabled{{/if}}">Execute Now</button>
        </td>
        <td class="text-center">
            <input id="jobState_{{id}}" type="checkbox" checked data-toggle="toggle" data-on="Enabled" data-off="Disabled" data-onstyle="success" data-offstyle="danger">
        </td>
    </tr>
</script>

<script src="~/Scripts/Scheduler/Scheduler.management.js"></script>
<script>
    $(function () {
        scheduler.management.init();
        scheduler.management.initEvents();
    });
</script>